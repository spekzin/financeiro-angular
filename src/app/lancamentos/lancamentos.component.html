<div class="flex min-h-screen bg-gray-100 text-gray-800">
    <main class="flex-1 p-10">
        <h2 class="text-3xl font-semibold mb-6">Lançamentos</h2>

        <!-- Formulário -->
        <div class="bg-white p-6 rounded shadow-md mb-8">
            <h3 class="text-xl font-bold mb-4">Novo Lançamento</h3>
            <form (ngSubmit)="registrar()" class="grid grid-cols-1 md:grid-cols-6 gap-4 items-end">
                <div class="flex flex-col">
                    <label>Data</label>
                    <input type="date" [(ngModel)]="novoLancamento.data" name="data" class="campo" required />
                </div>

                <div class="flex flex-col md:col-span-2">
                    <label>Descrição</label>
                    <textarea [(ngModel)]="novoLancamento.descricao" name="descricao" maxlength="60" rows="1"
                        class="campo" required></textarea>
                </div>

                <div class="flex flex-col">
                    <label>Cartão</label>
                    <select [(ngModel)]="novoLancamento.cartao" name="cartao" class="campo">
                        <option *ngFor="let c of cartoes" [value]="c.id">{{ c.titular }} - {{ c.instituicao }}</option>
                    </select>
                </div>

                <div class="flex flex-col">
                    <label>Valor</label>
                    <input type="text" [(ngModel)]="novoLancamento.valor" name="valor" (input)="formatarValor()"
                        class="campo" required />
                </div>

                <div class="flex md:col-span-6 justify-end">
                    <button type="submit"
                        class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 font-semibold">
                        {{ lancamentoEmEdicaoId ? 'Atualizar' : 'Registrar' }}
                    </button>
                </div>
            </form>
        </div>

        <!-- Tabela -->
        <div class="bg-white p-6 rounded shadow-md">
            <h3 class="text-xl font-bold mb-4">Lançamentos Registrados</h3>
            <p *ngIf="lancamentos.length === 0" class="text-gray-500">Nenhum lançamento cadastrado ainda.</p>

            <table *ngIf="lancamentos.length > 0" class="min-w-full text-sm text-left border">
                <thead class="bg-gray-100 text-gray-700">
                    <tr>
                        <th class="px-4 py-2 border-b">Data</th>
                        <th class="px-4 py-2 border-b">Descrição</th>
                        <th class="px-4 py-2 border-b">Cartão</th>
                        <th class="px-4 py-2 border-b text-right">Valor</th>
                        <th class="px-4 py-2 border-b text-center">Ações</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let reg of lancamentos" class="hover:bg-gray-50 transition">
                        <td class="px-4 py-2 border-b">{{ formatarData(reg.data) }}</td>
                        <td class="px-4 py-2 border-b">{{ reg.descricao }}</td>
                        <td class="px-4 py-2 border-b">{{ obterCartaoNome(reg.cartao) }}</td>
                        <td class="px-4 py-2 border-b text-right font-semibold">
                            {{ reg.valor | currency:'BRL' }}
                        </td>

                        <td class="px-4 py-2 border-b text-center space-x-1">
                            <button (click)="editar(reg)"
                                class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-xs">Alterar</button>
                            <button (click)="excluir(reg.id)"
                                class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-xs">Excluir</button>
                        </td>
                    </tr>
                </tbody>

                <!-- TOTAL -->
                <tfoot>
                    <tr class="bg-gray-100 font-semibold">
                        <td colspan="3" class="text-right pr-4">Total:</td>
                        <td class="px-4 py-2 text-right text-green-600">
                            {{ calcularTotal() | currency:'BRL' }}
                        </td>
                        <td></td>
                    </tr>
                </tfoot>

            </table>